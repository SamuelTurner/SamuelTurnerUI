 (function( $ ) { $.fn.clingyFooter = function( options ) { var defaults = { pageSelector : '#page', pageContentSelector : '#page-body', footerSelector: "#page-footer" }, settings = $.extend({}, defaults, options); var $page = $( settings.pageSelector ), $pageContent = $( settings.pageContentSelector ), $footer = $( settings.footerSelector ), $html = $("html"), $body = $("body"), $footerPadding = null; $html.css({ 'height' : '100%' }); $body.css({ 'height' : '100%' }); $page.css({ 'min-height' : '100%', 'position' : 'relative' }); $footer.css({ 'position' : 'absolute', 'bottom' : '0', 'max-height' : '100%', 'overflow-y' : 'auto' }); function setPageContentPadding() { $footerPadding = $footer.outerHeight( true ); $pageContent.css("padding-bottom", $footerPadding); } setPageContentPadding(); $(window).resize(setPageContentPadding); } })( jQuery ); function scrollbarWidth() { var $inner = jQuery('<div style="width: 100%; height:200px;">test</div>'), $outer = jQuery('<div style="width:200px;height:150px; position: absolute; top: 0; left: 0; visibility: hidden; overflow:hidden;"></div>').append($inner), inner = $inner[0], outer = $outer[0]; jQuery('body').append(outer); var width1 = inner.offsetWidth; $outer.css('overflow', 'scroll'); var width2 = outer.clientWidth; $outer.remove(); return (width1 - width2); } var navOpened = false; function navShowHide() { var fullWidth = $(window).width() + scrollbarWidth(); if (fullWidth < 641) { if (navOpened == true) { $('.page-header__nav').show(); } else { $('.page-header__nav').hide(); } } else { $('.page-header__nav').show(); } } $(document).ready(function(){ $(document).clingyFooter({ pageSelector : '#page', pageContentSelector : '#page-body', footerSelector: "#page-footer-wrapper" }); navShowHide(); $(window).resize(function() { navShowHide(); }); $('.no-js-hide').addClass('js-show').removeClass('no-js-hide'); $('.no-js-show').addClass('js-hide').removeClass('no-js-show'); $('.no-js-palm-show').addClass('js-palm-hide').removeClass('no-js-palm-show'); $('.page-header__menu-icon').on('click', function(e) { if (navOpened == false) { navOpened = true; $('.page-header__nav').show(); } else { navOpened = false; $('.page-header__nav').hide(); } }); });